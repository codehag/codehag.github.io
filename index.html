<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>hag.codes</title>
  </head>
  <body>
    <p>Welcome to my site.</p>
    <p>For some reason, I am demonstrating that scheme ~= JS here.</p>
  <p>If you don't know how you ended up here, you might want to go somewhere else.</p>
  <p>You can visit the <a href=https://hag.garden>garden</a> for some poorly organized thoughts.</p>
  <p>Or visit the <a href=https://yuliastartsev.com>anchor</a> instead, but you will end up back
  here ultimately.</p>

  <p>To open the developer tool console:</p>

  <ul>
    <li> for chrome: Command+Option+C (Mac) or Control+Shift+C (Windows, Linux, Chrome OS).</li>
    <li> for firefox: Command+Option+I (Mac) or Control+Shift+I (Windows, Linux, Chrome OS).</li>
    <li> for safari: Command+, to open settings, and in advanced panel turn on developer tools. After
    that: Command+Option+I</li>
  </ul>

  <p>then try these </p>
  <p>NOTE: None of this code runs through a custom interpreter or parser, this is done entirely with the JS parser. This is valid JavaScript, it just looks an awful lot like scheme.</p>

  <div id="examples"></div>

  <div>
    Syntax:
  </div>
  <table>
    <tr>
      <td>
        <code>with (scheme) conjure (... some code)</code>
      </td>
      <td>
        start conjuring scheme code
      </td>
    </tr>
    <tr>
      <td>
        <code>(define `variableName` (value))</code>
      </td>
      <td>
        define something as having a value. In the parentheses, anything can go.
      </td>
    </tr>
    <tr>
      <td>
        <code>(define `variableName`, value))</code>
      </td>
      <td>
        alternate spelling
      </td>
    </tr>
    <tr>
      <td>
        <code>(log `variableName` (value))</code>
      </td>
      <td>
        log a message and a value. In the parentheses, anything can go, including function calls
      </td>
    </tr>
    <tr>
      <td>
        <code>(log `log message`, value)</code>
      </td>
      <td>
        alternate spelling
      </td>
    </tr>
    <tr>
      <td>
        <code>(lambda `arg1 arg2 argn` (fn, arg1, arg2, argn))</code>
      </td>
      <td>
        create an anonymous function
      </td>
    </tr>
    <tr>
      <td>
        <code>(lambda `arg1 arg2 argn` (fn (arg1, arg2, argn)))</code>
      </td>
      <td>
        create an anonymous function (alternate spelling)
      </td>
    </tr>
    <tr>
      <td>
        <code>(cond (testFn) (consequentFn) (alternateFn))</code>
      </td>
      <td>
        conditional statement
      </td>
    </tr>
  </table>

  <div style="display:block; height: 10px"></div>

  <aside>
              The design is inspired by <a
                             href=https://motherfuckingwebsite.com/>https://motherfuckingwebsite.com/</a>
  </aside>
  </body>
  <script src="./scripts/jslisp.js"></script>
  <script>

function evalAndPrint(source) {
  console.log(source);
  eval(source);
}

function copy(source) {
  navigator.clipboard.writeText(source);
}

const def =
  `with (scheme) conjure
      (define \`myNumber\` (plus, 3, 4))
      (log \`the value of myNumber is\`, myNumber)`
const conditional =
  `with (scheme) conjure
      (define \`x\`
          (plus, 3, 4))
      (cond
          (equal, x, 9)
              (log \`when true\`, x)
              (log \`when false\`, x))`
const shame =
  `with (scheme) conjure
      (define \`myFn\`
        (lambda \`arg1 arg2\`
            (plus, arg1, arg2)))
      (log \`result\` (myFn, 15, 15))`

const examples = {def, conditional, shame};

const target = document.querySelector("#examples");
const list = document.createElement("ul");
target.appendChild(list);
for (const name in examples) {
  const element = document.createElement("li");
  element.innerHTML = `
    <pre><code>${examples[name]}</code></pre>
    <button onclick=evalAndPrint(${name})>run.</button>
    <button onclick=copy(${name})>copy.</button>`;
  list.appendChild(element);
}

  </script>
</html>
